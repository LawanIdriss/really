<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Number verification with OTP</title>
<style>
	/* ... (your existing styles) ... */
    #phoneSignInMessage { /* Styling for messages (same as before) */
        width: calc(100% - 22px);
        border: 2px solid; 
        border-radius: 4px;
        padding: 8px 10px;
        margin: 4px 0px;
        display: none; 
        transition: opacity 0.5s ease-in-out; 
    }
    #phoneSignInMessage.success {
        border-color: green;
        background-color: rgba(0, 249, 12, 0.5);
    }
    #phoneSignInMessage.error {
        border-color: red;
        background-color: rgba(255, 0, 4, 0.5);
    }
</style>
</head>

<body>
    <div class="container">
        <div id="phoneSignInMessage"></div> <div id="sender">
            <input type="text" id="phoneNumber" placeholder="+923...">
            <div id="recaptcha-container"></div>
            <input type="button" id="sendCodeButton" value="Send" onClick="phoneAuth()">
        </div>

        <div id="verifier" style="display: none">
            <input type="text" id="verificationCode" placeholder="OTP Code">
            <input type="button" id="verifyCodeButton" value="Verify" onClick="codeverify()">
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-auth-compat.js"></script>
    <script>

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBdBJZnp8WC11YV6yc5HP-FAMFHD6lwerU",
    authDomain: "fixespoint-app.firebaseapp.com",
    databaseURL: "https://fixespoint-app-default-rtdb.firebaseio.com",
    projectId: "fixespoint-app",
    storageBucket: "fixespoint-app.appspot.com",
    messagingSenderId: "462898145069",
    appId: "1:462898145069:web:b1998a949a60d39b9cd5a4",
    measurementId: "G-03L91TT4X9"
  };
	    
        function render(){
            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');
            recaptchaVerifier.render();
        }
        
        // Function to display messages with fading effect (same as before)
        function showMessage(message, isSuccess) { 
            const messageDiv = document.getElementById('phoneSignInMessage');
            messageDiv.classList.remove('success', 'error');
            messageDiv.classList.add(isSuccess ? 'success' : 'error');
            messageDiv.textContent = message;
            messageDiv.style.display = 'block';
            messageDiv.style.opacity = 1;
            setTimeout(() => {
                messageDiv.style.opacity = 0;
            }, 5000); // Fade out after 5 seconds
        }
        
        // Send message function (phoneAuth)
        function phoneAuth() {
            var number = document.getElementById('phoneNumber').value;
            firebase.auth().signInWithPhoneNumber(number, window.recaptchaVerifier)
                .then(function(confirmationResult) {
                    window.confirmationResult = confirmationResult;
                    document.getElementById('sender').style.display = 'none';
                    document.getElementById('verifier').style.display = 'block';
                    showMessage('Verification code sent. Please check your phone.', true); // Success message
                })
                .catch(function(error) {
                    showMessage(error.message, false); // Error message
                });
        }

        // Verification code function (codeverify)
        function codeverify() {
            var code = document.getElementById('verificationCode').value;
            window.confirmationResult.confirm(code)
                .then(function() {
                    showMessage('Number Verified', true);  // Success message
                })
                .catch(function(error) {
                    showMessage('OTP Error: ' + error.message, false); // Detailed error message
                });
        }

        render(); // Call render function for initial setup
    </script>
</body>
</html>
