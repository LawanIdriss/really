<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Number verification with OTP</title>
<style>
	/* ... your existing styles (including #phoneSignInMessage styles) ... */
</style>
</head>

<body>
<div class="container">
    <div id="phoneSignInMessage"></div> 
    <div id="sender">
        <input type="text" id="phoneNumber" placeholder="+923...">
        <div id="recaptcha-container"></div>
        <input type="button" id="sendCodeButton" value="Send" onclick="phoneAuth()">
    </div>

    <div id="verifier" style="display: none">
        <input type="text" id="verificationCode" placeholder="OTP Code">
        <input type="button" id="verifyCodeButton" value="Verify" onclick="codeverify()">
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-auth-compat.js"></script>
<script>
    // Firebase configuration (your provided values)
    const firebaseConfig = {
        apiKey: "AIzaSyBdBJZnp8WC11YV6yc5HP-FAMFHD6lwerU",
        authDomain: "fixespoint-app.firebaseapp.com",
        databaseURL: "https://fixespoint-app-default-rtdb.firebaseio.com",
        projectId: "fixespoint-app",
        storageBucket: "fixespoint-app.appspot.com",
        messagingSenderId: "462898145069",
        appId: "1:462898145069:web:b1998a949a60d39b9cd5a4",
        measurementId: "G-03L91TT4X9"
    };

    firebase.initializeApp(firebaseConfig);

    // Render reCAPTCHA (same as before)
    function render() {
        window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');
        recaptchaVerifier.render();
    }

    // Function to display messages (same as before)
    function showMessage(message, isSuccess) {
        // ... (code for showMessage function) ...
    }

    // Function to send verification code (phoneAuth)
    function phoneAuth() {
        var number = document.getElementById('phoneNumber').value;
        firebase.auth().signInWithPhoneNumber(number, window.recaptchaVerifier)
            .then(function(confirmationResult) {
                window.confirmationResult = confirmationResult;
                document.getElementById('sender').style.display = 'none';
                document.getElementById('verifier').style.display = 'block';
                showMessage('Verification code sent. Please check your phone.', true);
            })
            .catch(function(error) {
                showMessage(error.message, false); 
            });
    }

    // Function to verify code (codeverify)
    function codeverify() {
        var code = document.getElementById('verificationCode').value;
        window.confirmationResult.confirm(code)
            .then(function() {
                showMessage('Number Verified! Redirecting...', true);
                // Redirect after a short delay
                setTimeout(function() {
                    window.location.href = 'https://fixespoint.com/app'; 
                }, 2000); // 2 seconds (adjust as needed)
            })
            .catch(function(error) {
                showMessage('OTP Error: ' + error.message, false);
            });
    }

    render(); // Initial reCAPTCHA setup
</script>
</body>
</html>
